1.?The main functionality of this code snippet is to read and parse a csv file and process requests/actions represented by each record (line).The first line is CSV headers, and the following lines are comma separated?values describing the details of action required.If there are any errors occurred during the processing of those actions, a skip record file will be generated.When the process is completed, an email will be sent to the requester.
Any error will be written to log files and reported to the workflow case.
processing of action requests:?processLineHash()According to the details of the request, this method gets information like application, entitlement, role, option rule, attribute, etc.If the action is "add" and the optional role is empty, try to add this optional role (it will fail if there is a pending role creation).if the action is "delete" but the optional role is empty, skip this record;Then if three?is a pending approval, skip current record; else process entitlement:If the entitlement doesn't exist and the action is "add", add entitlement;If the entitlement exists and the action is "add", skip current record;If the entitlement exists and the action is "delete", delete the entitlement;If the entitlement doesn't exist and the action is "delete", skip current record;
Also it's checked if an update is needed, if yes, update without approval.
